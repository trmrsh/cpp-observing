#!/usr/bin/perl 
#
# Overall documentation script for the rvanal radial
# velocity analysis routines.

(@ARGV == 1) or die "usage: perl docgen.pl <html directory>\n";

$html = shift;

require "document.pl";

$time = localtime;

# Command classes. Individual files require pointers
# to these to get into them.

%classes = (
	    'Programs'   => 'Executable programs.',
	    );

# now generate individual command documentation.

foreach $file ('airmass.cc', 'starinfo.cc', 'eclipsers.cc', 'ephemeris.cc', 'whatphases.cc'){
    document("../src/$file",$html,"html","html","");
}

# generate overall index file

open(INDEX, ">$html/index.html") or die "Could not open index file\n";
print INDEX <<END1;
<html>
<head>
<title>Observing programs</title>
<link rel=stylesheet href="style.css" type="text/css">
</head>
<body>
<h1>Observing programs, Version ZzZzZ</h1>
<p>
This is the main page for documentation on a few programs that may be useful
during observing runs.

<p>
<table>

<tr><td><a href="Alphabet.html">Alphabetical list</a></td><td>List of the available programs.</td></tr>

<tr><td><a href="Changes.html">Changes</a></td><td>List of changes made to the software.</td></tr>

<tr><td><a href="api/html/index.html">API</a></td><td>Details of the library of functions that form the
bulk of this software.</td></tr>

</table>

<p><hr>
<address>Page generated $time</address>
</body></html>
END1
close(INDEX);

# write alphabetical list of all commands.

open(ALPHA, ">$html/Alphabet.html") or 
    die "Could not open command list\n";
print ALPHA <<END4;
<html>
<head>
<title>Observing software, alphabetical</title>
<link rel=stylesheet href="style.css" type="text/css">
</head>
<body>
<h1>Observing software, alphabetical</h1>
<p>

<p>
<table>
END4

foreach $item (sort keys %index){
    print ALPHA 
	"<tr><td><a href=\"$index{$item}->{file}\">$item</a>".
	"</td><td>$index{$item}->{description}</td>\n";
}

print ALPHA "</table><p><hr>\n";
print ALPHA "<address>Page generated $time</address>\n";
print ALPHA "</body></html>\n";
close(ALPHA);

exit;











